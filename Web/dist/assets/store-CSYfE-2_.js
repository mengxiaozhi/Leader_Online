import{_ as R,r as d,f as S,c as l,a as t,d as h,j as z,t as n,n as F,F as u,g as y,k as Q,T as U,u as L,o,h as T,e as P,v as G,i as b}from"./index-B6rpggr8.js";const H={class:"pt-6 pb-12 px-4"},J={class:"max-w-6xl mx-auto"},K={class:"bg-white shadow-sm border-b border-gray-100 mb-8 p-6 flex justify-between items-center"},W={class:"bg-red-50 text-red-700 px-4 py-2 text-sm font-medium border border-red-200"},X={class:"relative mb-12"},Y={class:"flex justify-center border-b border-gray-200 relative"},Z=["onClick"],tt={key:0,class:"slide-in"},et={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},st={class:"text-lg font-semibold text-[#D90000]"},at={class:"text-sm text-gray-600"},lt={class:"text-sm text-gray-700 font-medium"},nt={class:"flex items-center mt-2 gap-2"},ot=["onClick"],it=["onUpdate:modelValue"],rt=["onClick"],ct=["onClick"],dt={key:1,class:"slide-in"},ut={key:0,class:"space-y-4"},yt={class:"font-medium"},gt={class:"text-sm text-gray-500"},vt={class:"flex gap-2"},pt=["onClick"],ht=["onClick"],bt=["onClick"],mt={class:"text-right text-lg font-bold"},_t={key:1,class:"text-center text-gray-500"},xt={key:2,class:"slide-in"},kt={key:0,class:"space-y-4"},ft={key:1,class:"text-center text-gray-500"},wt={key:3,class:"slide-in"},Ct={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},qt={class:"text-lg font-semibold text-gray-800 mb-2"},$t={class:"text-sm text-gray-600"},Tt={class:"text-sm text-gray-600 mb-4"},Dt={class:"list-disc ml-6 text-sm text-gray-700 space-y-1 mb-4"},Nt={class:"flex gap-3 mt-4"},Bt=["onClick"],jt=["onClick"],Et={key:0,class:"fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50"},It={class:"bg-white shadow-lg p-6 w-full max-w-md relative"},Vt={class:"text-xl font-bold text-[#D90000] mb-4 text-center"},At={class:"text-sm text-gray-600"},Ot={class:"text-sm text-gray-600 mb-4"},Mt={class:"list-disc ml-6 text-sm text-gray-700 space-y-1 mb-4"},Rt={__name:"store",setup(St){const D=L(),_=[{key:"shop",label:"商店"},{key:"cart",label:"購物車"},{key:"orders",label:"我的訂單"},{key:"events",label:"賽事預約"}],g=d("shop"),f=d(0),N=(s,a)=>{g.value=s,f.value=a},p=d([{name:"小鐵人",description:"適合5~8歲",price:300,quantity:1},{name:"大鐵人",description:"適合9~12歲",price:500,quantity:1},{name:"滑步車",description:"適合3~6歲",price:200,quantity:1}]),B=s=>{p.value[s].quantity<10&&p.value[s].quantity++},j=s=>{p.value[s].quantity>1&&p.value[s].quantity--},r=d([]),E=s=>{const a=r.value.find(e=>e.name===s.name);a?a.quantity+=s.quantity:r.value.push({...s}),alert(`已加入 ${s.name}`)},w=(s,a)=>{r.value[s].quantity+=a,r.value[s].quantity<=0&&C(s)},C=s=>{r.value.splice(s,1)},I=S(()=>r.value.reduce((s,a)=>s+a.price*a.quantity,0)),V=()=>{const s="ORD-",a=Math.floor(1e3+Math.random()*9e3);return`${s}${a}`},x=d([{id:"ORD-001",ticketType:"小鐵人",quantity:2,total:600,createdAt:"2025-07-21",status:"已完成"},{id:"ORD-002",ticketType:"滑步車",quantity:1,total:200,createdAt:"2025-07-22",status:"處理中"}]),A=()=>{if(!r.value.length){alert("購物車是空的");return}r.value.forEach(s=>{x.value.push({id:V(),ticketType:s.name,quantity:s.quantity,total:s.price*s.quantity,createdAt:new Date().toISOString().slice(0,16).replace("T"," "),status:"待匯款"})}),alert(`✅ 已生成 ${r.value.length} 筆訂單，請完成匯款`),r.value=[]},O=d([{id:1,name:"墾丁 70.3 鐵人賽",date:"2025-10-31 ~ 11-02",deadline:"2025-10-26",rules:["17噸卡車運送","依法規投保貨物險","禁止裸車","代購包材$100/現場代包$300"]},{id:2,name:"親子滑步趣跑賽",date:"2025-09-01",deadline:"2025-08-25",rules:["適合 3-8 歲兒童","含安全檢查與托運保險"]}]),k=d(!1),v=d(null),q=s=>{D.push({name:"booking-detail",params:{id:s}})},M=s=>{v.value=s,k.value=!0};return(s,a)=>(o(),l("main",H,[t("div",J,[t("header",K,[a[2]||(a[2]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"鐵人競賽購票中心"),t("p",{class:"text-gray-600 mt-1"},"購買票券 • 管理訂單 • 預約賽事")],-1)),t("div",W," 購物車 "+n(r.value.length)+" 項 ",1)]),t("div",X,[t("div",Y,[t("div",{class:"tab-indicator",style:F({left:f.value*(100/_.length)+"%",width:100/_.length+"%"})},null,4),(o(),l(u,null,y(_,(e,i)=>t("button",{key:e.key,onClick:c=>N(e.key,i),class:T(["relative px-6 py-4 font-semibold transition-all duration-300 text-lg flex-1",g.value===e.key?"text-[#D90000]":"text-gray-500 hover:text-[#B00000]"])},n(e.label),11,Z)),64))])]),g.value==="shop"?(o(),l("section",tt,[t("div",et,[(o(!0),l(u,null,y(p.value,(e,i)=>(o(),l("div",{key:i,class:"ticket-card bg-white border-2 border-gray-100 p-5 shadow-sm hover:shadow-lg transition"},[t("h2",st,n(e.name),1),t("p",at,n(e.description),1),t("p",lt,"NT$ "+n(e.price),1),t("div",nt,[t("button",{onClick:c=>j(i),class:"px-3 py-1 bg-gray-200"},"-",8,ot),P(t("input",{type:"number","onUpdate:modelValue":c=>e.quantity=c,min:"1",max:"10",class:"w-20 px-2 py-1 border border-gray-300 text-center"},null,8,it),[[G,e.quantity,void 0,{number:!0}]]),t("button",{onClick:c=>B(i),class:"px-3 py-1 bg-gray-200"},"+",8,rt)]),t("button",{class:"mt-3 w-full py-2 text-white font-medium bg-[#D90000] hover:bg-[#B00000]",onClick:c=>E(e)}," 加入購物車 ",8,ct)]))),128))])])):h("",!0),g.value==="cart"?(o(),l("section",dt,[r.value.length?(o(),l("div",ut,[(o(!0),l(u,null,y(r.value,(e,i)=>(o(),l("div",{key:i,class:"ticket-card bg-white border-2 border-gray-100 p-5 shadow-sm hover:shadow-lg transition flex justify-between items-center"},[t("div",null,[t("p",yt,n(e.name),1),t("p",gt,"NT$ "+n(e.price)+" x "+n(e.quantity),1)]),t("div",vt,[t("button",{onClick:c=>w(i,-1),class:"px-3 py-1 bg-gray-200"},"-",8,pt),t("button",{onClick:c=>w(i,1),class:"px-3 py-1 bg-gray-200"},"+",8,ht),t("button",{onClick:c=>C(i),class:"px-3 py-1 bg-red-200 text-red-700"},"移除",8,bt)])]))),128)),t("div",mt,"總計：NT$ "+n(I.value),1),t("button",{onClick:A,class:"w-full bg-[#D90000] text-white py-2 hover:bg-[#B00000] font-semibold"}," 結帳 ")])):(o(),l("p",_t,"購物車目前是空的"))])):h("",!0),g.value==="orders"?(o(),l("section",xt,[x.value.length?(o(),l("div",kt,[(o(!0),l(u,null,y(x.value,e=>(o(),l("div",{key:e.id,class:"ticket-card bg-white border-2 border-gray-100 p-5 shadow-sm hover:shadow-lg transition"},[t("p",null,[a[3]||(a[3]=t("strong",null,"訂單編號：",-1)),b(n(e.id),1)]),t("p",null,[a[4]||(a[4]=t("strong",null,"票券種類：",-1)),b(n(e.ticketType),1)]),t("p",null,[a[5]||(a[5]=t("strong",null,"數量：",-1)),b(n(e.quantity),1)]),t("p",null,[a[6]||(a[6]=t("strong",null,"總金額：",-1)),b("NT$ "+n(e.total),1)]),t("p",null,[a[7]||(a[7]=t("strong",null,"建立時間：",-1)),b(n(e.createdAt),1)]),t("p",null,[a[8]||(a[8]=t("strong",null,"狀態：",-1)),t("span",{class:T({"text-green-600":e.status==="已完成","text-yellow-600":e.status==="待匯款","text-blue-600":e.status==="處理中"})},n(e.status),3)])]))),128))])):(o(),l("p",ft,"尚無訂單紀錄"))])):h("",!0),g.value==="events"?(o(),l("section",wt,[t("div",Ct,[(o(!0),l(u,null,y(O.value,e=>(o(),l("div",{key:e.id,class:"ticket-card bg-white border-2 border-gray-100 p-6 shadow-sm hover:shadow-lg transition flex flex-col justify-between"},[t("div",null,[t("h2",qt,n(e.name),1),t("p",$t,"📅 "+n(e.date),1),t("p",Tt,"🛑 報名截止："+n(e.deadline),1),t("ul",Dt,[(o(!0),l(u,null,y(e.rules,i=>(o(),l("li",{key:i},n(i),1))),128))])]),t("div",Nt,[t("button",{onClick:i=>q(e.id),class:"flex-1 bg-[#D90000] text-white py-2 hover:bg-[#B00000]"}," 立即預約 ",8,Bt),t("button",{onClick:i=>M(e),class:"flex-1 bg-gray-100 text-gray-700 py-2 hover:bg-gray-200"}," 查看詳細 ",8,jt)])]))),128))])])):h("",!0),z(U,{name:"fade"},{default:Q(()=>{var e,i,c,$;return[k.value?(o(),l("div",Et,[t("div",It,[t("button",{class:"absolute top-3 right-3 text-gray-500 hover:text-gray-700",onClick:a[0]||(a[0]=m=>k.value=!1)}," ✕ "),t("h3",Vt,n((e=v.value)==null?void 0:e.name),1),t("p",At,"📅 日期："+n((i=v.value)==null?void 0:i.date),1),t("p",Ot,"🛑 截止："+n((c=v.value)==null?void 0:c.deadline),1),t("ul",Mt,[(o(!0),l(u,null,y(($=v.value)==null?void 0:$.rules,m=>(o(),l("li",{key:m},n(m),1))),128))]),t("button",{onClick:a[1]||(a[1]=m=>q(v.value.id)),class:"w-full bg-[#D90000] text-white py-2 hover:bg-[#B00000]"}," 前往預約 ")])])):h("",!0)]}),_:1})])]))}},Ft=R(Rt,[["__scopeId","data-v-1844dc58"]]);export{Ft as default};
